{"version":3,"sources":["../src/app.js"],"names":["token","req","res","JSON","stringify","body","app","set","resolve","__dirname","use","json","tokens","method","url","status","join","static","err","next","message","stackTrace","stack"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,iBAAOA,KAAP,CAAa,MAAb,EAAqB,CAACC,GAAD,EAAMC,GAAN,KAAcC,KAAKC,SAAL,CAAeH,IAAII,IAAnB,CAAnC;;kBAEe,MAAM;AACpB,OAAMC,MAAM,wBAAZ;;AAEAA,KAAIC,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAD,KAAIC,GAAJ,CAAQ,OAAR,EAAiB,eAAKC,OAAL,CAAaC,SAAb,EAAwB,OAAxB,CAAjB;AACAH,KAAII,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;AACAL,KAAII,GAAJ,CAAQ,qBAAR;AACAJ,KAAII,GAAJ,CAAQ,sBAAO,CAACE,MAAD,EAASX,GAAT,EAAcC,GAAd,KACd,CACCU,OAAOC,MAAP,CAAcZ,GAAd,EAAmBC,GAAnB,CADD,EAECU,OAAOE,GAAP,CAAWb,GAAX,EAAgBC,GAAhB,CAFD,EAGCU,OAAOP,IAAP,CAAYJ,GAAZ,EAAiBC,GAAjB,CAHD,EAICU,OAAOG,MAAP,CAAcd,GAAd,EAAmBC,GAAnB,CAJD,EAKCU,OAAOV,GAAP,CAAWD,GAAX,EAAgBC,GAAhB,EAAqB,gBAArB,CALD,EAKyC,GALzC,EAMCU,OAAO,eAAP,EAAwBX,GAAxB,EAA6BC,GAA7B,CAND,EAMoC,IANpC,EAOEc,IAPF,CAOO,GAPP,CADO,CAAR;;AAWAV,KAAII,GAAJ,CAAQ,GAAR,EAAa,uBAAb;AACAJ,KAAII,GAAJ,CAAQ,kBAAQO,MAAR,CAAe,eAAKT,OAAL,CAAaC,SAAb,EAAwB,QAAxB,CAAf,CAAR;;AAEAH,KAAII,GAAJ,CAAQ,CAACQ,GAAD,EAAMjB,GAAN,EAAWC,GAAX,EAAgBiB,IAAhB,KAAyB;AAChCjB,MAAIa,MAAJ,CAAWG,IAAIH,MAAJ,IAAc,GAAzB,EAA8BJ,IAA9B,CAAmC;AAClCI,WAAQG,IAAIH,MAAJ,IAAc,GADY;AAElCK,YAASF,IAAIE,OAFqB;AAGlCC,eAAYH,IAAII;AAHkB,GAAnC;AAKA,EAND;;AAQA,QAAOhB,GAAP;AACA,C","file":"app.js","sourcesContent":["import path from 'path';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport morgan from 'morgan';\nimport cors from 'cors';\nimport getRoutes from './routes';\n\nmorgan.token('body', (req, res) => JSON.stringify(req.body));\n\nexport default () => {\n\tconst app = express();\n\n\tapp.set('view engine', 'ejs');\n\tapp.set('views', path.resolve(__dirname, 'views'));\n\tapp.use(bodyParser.json());\n\tapp.use(cors());\n\tapp.use(morgan((tokens, req, res) => (\n\t\t[\n\t\t\ttokens.method(req, res),\n\t\t\ttokens.url(req, res),\n\t\t\ttokens.body(req, res),\n\t\t\ttokens.status(req, res),\n\t\t\ttokens.res(req, res, 'content-length'), '-',\n\t\t\ttokens['response-time'](req, res), 'ms'\n\t\t].join(' ')\n\t)));\n\n\tapp.use('/', getRoutes());\n\tapp.use(express.static(path.resolve(__dirname, '../web')));\n\n\tapp.use((err, req, res, next) => {\n\t\tres.status(err.status || 500).json({\n\t\t\tstatus: err.status || 500,\n\t\t\tmessage: err.message,\n\t\t\tstackTrace: err.stack\n\t\t});\n\t});\n\n\treturn app;\n}"]}