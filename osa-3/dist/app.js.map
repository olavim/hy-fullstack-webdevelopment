{"version":3,"sources":["../src/app.js"],"names":["token","req","JSON","stringify","body","app","set","resolve","__dirname","use","json","tokens","res","method","url","status","join","static","err","next","message","stackTrace","stack"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,iBAAOA,KAAP,CAAa,MAAb,EAAqBC,OAAOC,KAAKC,SAAL,CAAeF,IAAIG,IAAnB,CAA5B;;kBAEe,MAAM;AACpB,OAAMC,MAAM,wBAAZ;;AAEAA,KAAIC,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAD,KAAIC,GAAJ,CAAQ,OAAR,EAAiB,eAAKC,OAAL,CAAaC,SAAb,EAAwB,OAAxB,CAAjB;AACAH,KAAII,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;AACAL,KAAII,GAAJ,CAAQ,qBAAR;AACAJ,KAAII,GAAJ,CAAQ,sBAAO,CAACE,MAAD,EAASV,GAAT,EAAcW,GAAd,KACd,CACCD,OAAOE,MAAP,CAAcZ,GAAd,EAAmBW,GAAnB,CADD,EAECD,OAAOG,GAAP,CAAWb,GAAX,EAAgBW,GAAhB,CAFD,EAGCD,OAAOP,IAAP,CAAYH,GAAZ,EAAiBW,GAAjB,CAHD,EAICD,OAAOI,MAAP,CAAcd,GAAd,EAAmBW,GAAnB,CAJD,EAKCD,OAAOC,GAAP,CAAWX,GAAX,EAAgBW,GAAhB,EAAqB,gBAArB,CALD,EAKyC,GALzC,EAMCD,OAAO,eAAP,EAAwBV,GAAxB,EAA6BW,GAA7B,CAND,EAMoC,IANpC,EAOEI,IAPF,CAOO,GAPP,CADO,CAAR;;AAWAX,KAAII,GAAJ,CAAQ,GAAR,EAAa,uBAAb;AACAJ,KAAII,GAAJ,CAAQ,kBAAQQ,MAAR,CAAe,eAAKV,OAAL,CAAaC,SAAb,EAAwB,QAAxB,CAAf,CAAR;;AAEA;AACAH,KAAII,GAAJ,CAAQ,CAACS,GAAD,EAAMjB,GAAN,EAAWW,GAAX,EAAgBO,IAAhB,KAAyB;AAChCP,MAAIG,MAAJ,CAAWG,IAAIH,MAAJ,IAAc,GAAzB,EAA8BL,IAA9B,CAAmC;AAClCK,WAAQG,IAAIH,MAAJ,IAAc,GADY;AAElCK,YAASF,IAAIE,OAFqB;AAGlCC,eAAYH,IAAII;AAHkB,GAAnC;AAKA,EAND;;AAQA,QAAOjB,GAAP;AACA,C","file":"app.js","sourcesContent":["import path from 'path';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport morgan from 'morgan';\nimport cors from 'cors';\nimport getRoutes from './routes';\n\nmorgan.token('body', req => JSON.stringify(req.body));\n\nexport default () => {\n\tconst app = express();\n\n\tapp.set('view engine', 'ejs');\n\tapp.set('views', path.resolve(__dirname, 'views'));\n\tapp.use(bodyParser.json());\n\tapp.use(cors());\n\tapp.use(morgan((tokens, req, res) => (\n\t\t[\n\t\t\ttokens.method(req, res),\n\t\t\ttokens.url(req, res),\n\t\t\ttokens.body(req, res),\n\t\t\ttokens.status(req, res),\n\t\t\ttokens.res(req, res, 'content-length'), '-',\n\t\t\ttokens['response-time'](req, res), 'ms'\n\t\t].join(' ')\n\t)));\n\n\tapp.use('/', getRoutes());\n\tapp.use(express.static(path.resolve(__dirname, '../web')));\n\n\t// eslint-disable-next-line no-unused-vars\n\tapp.use((err, req, res, next) => {\n\t\tres.status(err.status || 500).json({\n\t\t\tstatus: err.status || 500,\n\t\t\tmessage: err.message,\n\t\t\tstackTrace: err.stack\n\t\t});\n\t});\n\n\treturn app;\n};"]}