{"version":3,"sources":["../src/app.js"],"names":["app","use","json","process","env","NODE_ENV","req","res","next","user","JSON","parse","TEST_USER","secret","SECRET","err","status","message","stackTrace","stack"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe,MAAM;AACpB,OAAMA,MAAM,wBAAZ;AACAA,KAAIC,GAAJ,CAAQ,qBAAR;AACAD,KAAIC,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;;AAEA,KAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,MAA7B,EAAqC;AACpCL,MAAIC,GAAJ,CAAQ,oBAAR,EAA8B,CAACK,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACjDF,OAAIG,IAAJ,GAAWC,KAAKC,KAAL,CAAWR,QAAQC,GAAR,CAAYQ,SAAvB,CAAX;AACAJ;AACA,GAHD;AAIA,EALD,MAKO;AACNR,MAAIC,GAAJ,CAAQ,oBAAR,EAA8B,0BAAI,EAACY,QAAQV,QAAQC,GAAR,CAAYU,MAArB,EAAJ,CAA9B;AACA;;AAEDd,KAAIC,GAAJ,CAAQ,uBAAR;;AAEA;AACAD,KAAIC,GAAJ,CAAQ,CAACc,GAAD,EAAMT,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;AAChCD,MAAIS,MAAJ,CAAWD,IAAIC,MAAJ,IAAc,GAAzB,EAA8Bd,IAA9B,CAAmC;AAClCc,WAAQD,IAAIC,MAAJ,IAAc,GADY;AAElCC,YAASF,IAAIE,OAFqB;AAGlCC,eAAYH,IAAII;AAHkB,GAAnC;AAKA,EAND;;AAQA,QAAOnB,GAAP;AACA,C","file":"app.js","sourcesContent":["import express from 'express';\nimport cors from 'cors';\nimport jwt from 'express-jwt';\nimport bodyParser from 'body-parser';\nimport getRoutes from './routes';\n\nexport default () => {\n\tconst app = express();\n\tapp.use(cors());\n\tapp.use(bodyParser.json());\n\n\tif (process.env.NODE_ENV === 'test') {\n\t\tapp.use(/^(?!\\/api\\/login$)/, (req, res, next) => {\n\t\t\treq.user = JSON.parse(process.env.TEST_USER);\n\t\t\tnext();\n\t\t});\n\t} else {\n\t\tapp.use(/^(?!\\/api\\/login$)/, jwt({secret: process.env.SECRET}));\n\t}\n\n\tapp.use(getRoutes());\n\n\t// eslint-disable-next-line no-unused-vars\n\tapp.use((err, req, res, next) => {\n\t\tres.status(err.status || 500).json({\n\t\t\tstatus: err.status || 500,\n\t\t\tmessage: err.message,\n\t\t\tstackTrace: err.stack\n\t\t});\n\t});\n\n\treturn app;\n}\n"]}