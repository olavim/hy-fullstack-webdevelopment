{"version":3,"sources":["../src/index.js"],"names":["process","env","NODE_ENV","load","console","log","connect","MONGODB_URI","findOne","username","passwordHash","hash","superuser","name","save","server","port","PORT","listen"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,kBAAC,aAAW;AACX,KAAIA,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AAC1C,mBAAOC,IAAP;AACAC,UAAQC,GAAR,CAAY,YAAZ;AACA;;AAED,oBAASC,OAAT,CAAiBN,QAAQC,GAAR,CAAYM,WAA7B;;AAEA;AACA,KAAIP,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,IAA0C,EAAE,MAAM,eAAKM,OAAL,CAAa,EAACC,UAAU,WAAX,EAAb,CAAR,CAA9C,EAA8F;AAC7F,QAAMC,eAAe,MAAM,iBAAOC,IAAP,CAAY,QAAZ,EAAsB,EAAtB,CAA3B;AACA,QAAMC,YAAY,mBAAS,EAACH,UAAU,WAAX,EAAwBI,MAAM,UAA9B,EAA0CH,YAA1C,EAAT,CAAlB;AACA,QAAME,UAAUE,IAAV,EAAN;AACA;;AAED,OAAMC,SAAS,oBAAf;AACA,OAAMC,OAAOhB,QAAQC,GAAR,CAAYgB,IAAZ,IAAoB,IAAjC;;AAEAF,QAAOG,MAAP,CAAcF,IAAd,EAAoB,YAAM;AACzBZ,UAAQC,GAAR,CAAa,0BAAyBW,IAAK,EAA3C;AACA,EAFD;AAGA,CArBD","file":"index.js","sourcesContent":["import mongoose from 'mongoose';\nimport dotenv from 'dotenv';\nimport bcrypt from 'bcrypt';\nimport User from './models/user';\nimport app from './app';\n\n(async() => {\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tdotenv.load();\n\t\tconsole.log('Loaded env');\n\t}\n\n\tmongoose.connect(process.env.MONGODB_URI);\n\n\t// For testing purposes.\n\tif (process.env.NODE_ENV === 'development' && !(await User.findOne({username: 'superuser'}))) {\n\t\tconst passwordHash = await bcrypt.hash('foofum', 10);\n\t\tconst superuser = new User({username: 'superuser', name: 'Superman', passwordHash});\n\t\tawait superuser.save();\n\t}\n\n\tconst server = app();\n\tconst port = process.env.PORT || 3003;\n\n\tserver.listen(port, () => {\n\t\tconsole.log(`Server running on port ${port}`)\n\t});\n})();"]}