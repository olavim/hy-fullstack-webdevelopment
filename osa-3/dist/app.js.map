{"version":3,"sources":["../src/app.js"],"names":["resources","app","set","resolve","__dirname","use","json","tokens","req","res","method","url","body","status","join","static","err","next","message","stackTrace","stack","token","JSON","stringify"],"mappings":";;;;;;kBASe,UAASA,SAAT,EAAoB;AAClC,OAAMC,MAAM,wBAAZ;;AAEAA,KAAIC,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAD,KAAIC,GAAJ,CAAQ,OAAR,EAAiB,eAAKC,OAAL,CAAaC,SAAb,EAAwB,OAAxB,CAAjB;AACAH,KAAII,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;AACAL,KAAII,GAAJ,CAAQ,qBAAR;AACAJ,KAAII,GAAJ,CAAQ,sBAAO,CAACE,MAAD,EAASC,GAAT,EAAcC,GAAd,KACd,CACCF,OAAOG,MAAP,CAAcF,GAAd,EAAmBC,GAAnB,CADD,EAECF,OAAOI,GAAP,CAAWH,GAAX,EAAgBC,GAAhB,CAFD,EAGCF,OAAOK,IAAP,CAAYJ,GAAZ,EAAiBC,GAAjB,CAHD,EAICF,OAAOM,MAAP,CAAcL,GAAd,EAAmBC,GAAnB,CAJD,EAKCF,OAAOE,GAAP,CAAWD,GAAX,EAAgBC,GAAhB,EAAqB,gBAArB,CALD,EAKyC,GALzC,EAMCF,OAAO,eAAP,EAAwBC,GAAxB,EAA6BC,GAA7B,CAND,EAMoC,IANpC,EAOEK,IAPF,CAOO,GAPP,CADO,CAAR;;AAWAb,KAAII,GAAJ,CAAQ,GAAR,EAAa,sBAAUL,SAAV,CAAb;AACAC,KAAII,GAAJ,CAAQ,kBAAQU,MAAR,CAAe,eAAKZ,OAAL,CAAaC,SAAb,EAAwB,QAAxB,CAAf,CAAR;;AAEAH,KAAII,GAAJ,CAAQ,CAACW,GAAD,EAAMR,GAAN,EAAWC,GAAX,EAAgBQ,IAAhB,KAAyB;AAChCR,MAAII,MAAJ,CAAWG,IAAIH,MAAJ,IAAc,GAAzB,EAA8BP,IAA9B,CAAmC;AAClCO,WAAQG,IAAIH,MAAJ,IAAc,GADY;AAElCK,YAASF,IAAIE,OAFqB;AAGlCC,eAAYH,IAAII;AAHkB,GAAnC;AAKA,EAND;AAOA,QAAOnB,GAAP;AACA,C;;AAtCD;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,iBAAOoB,KAAP,CAAa,MAAb,EAAqB,CAACb,GAAD,EAAMC,GAAN,KAAca,KAAKC,SAAL,CAAef,IAAII,IAAnB,CAAnC","file":"app.js","sourcesContent":["import path from 'path';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport morgan from 'morgan';\nimport cors from 'cors';\nimport getRoutes from './routes';\n\nmorgan.token('body', (req, res) => JSON.stringify(req.body));\n\nexport default function(resources) {\n\tconst app = express();\n\n\tapp.set('view engine', 'ejs');\n\tapp.set('views', path.resolve(__dirname, 'views'));\n\tapp.use(bodyParser.json());\n\tapp.use(cors());\n\tapp.use(morgan((tokens, req, res) => (\n\t\t[\n\t\t\ttokens.method(req, res),\n\t\t\ttokens.url(req, res),\n\t\t\ttokens.body(req, res),\n\t\t\ttokens.status(req, res),\n\t\t\ttokens.res(req, res, 'content-length'), '-',\n\t\t\ttokens['response-time'](req, res), 'ms'\n\t\t].join(' ')\n\t)));\n\n\tapp.use('/', getRoutes(resources));\n\tapp.use(express.static(path.resolve(__dirname, '../web')));\n\n\tapp.use((err, req, res, next) => {\n\t\tres.status(err.status || 500).json({\n\t\t\tstatus: err.status || 500,\n\t\t\tmessage: err.message,\n\t\t\tstackTrace: err.stack\n\t\t});\n\t});\n\treturn app;\n}"]}